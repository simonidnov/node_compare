"use strict";$(function(){account.init()});var account={user:null,sdk:null,init:function(){this.create_forms(),this.set_listeners()},set_listeners:function(){$("[data-action]").on("click",function(){switch($(this).attr("data-action")){case"delete":var e={};e[$(this).attr("data-type")]=$(this).attr("data-value"),index.sdk.api.call("DELETE",$(this).attr("data-post"),e,function(e){window.location.reload()});break;case"edit":$("#"+$(this).attr("data-edittemplate")).length>0&&$("#"+$(this).attr("data-edittemplate")).remove(),$(".editable").removeClass("editable");var t=$(this).parent().parent();index.sdk.template($(this).attr("data-edittemplate"),{member_id:$(this).attr("data-value")},function(e){t.append(e),account.member_edit_form=new formular("#member_edit_form",function(e){if("undefined"!=typeof e.action)switch(e.action){case"cancel":t.removeClass("editable"),$("#member_edit_form").remove();break;case"save":var a={member_id:$("#member_edit_form").attr("data-memberid")};$.each($("#member_edit_form form").serializeArray(),function(e,t){a[t.name]=t.value}),"undefined"!=typeof $("#member_edit_form #child_avatar").attr("data-path")&&(a.avatar=$("#member_edit_form #child_avatar").attr("data-path")),index.sdk.api.put("/me/members",a,function(e){console.log(e)})}}).init(),t.addClass("editable")})}})},create_forms:function(){this.public_form=new formular("#public_datas",function(e){console.log(e)}).init(),this.public_form=new formular("#add_kid",function(e){if("hitted"===e.status&&"submit"===e.action){var t={};$.each($("#add_kid form").serializeArray(),function(e,a){t[a.name]=a.value}),index.sdk.api.post("/me/members",t,function(e){window.location.reload()})}}).init(),this.address_form=new formular("#address_form",function(e){if(console.log(e),"validated"===e.status){$("#addressLine1").val()+"+"+$("#postalCode").val()+"+"+$("#city").val()+"+"+$("#addressCountry").val()}}).init(),this.private_form=new formular("#private_datas",function(e){}).init(),$("#member_datas").length>0&&(this.member_form=new formular("#member_datas",function(e){if("undefined"!=typeof e.action)switch(e.action){case"save":var t={member_id:$("#member_datas").attr("data-memberid")};$.each($("#member_datas form").serializeArray(),function(e,a){t[a.name]=a.value}),index.sdk.api.put("/me/members",t,function(e){window.location.reload()})}}).init())}};