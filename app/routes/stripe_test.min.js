var keyPublishable="",keySecret="",express=require("express"),stripe_test=express.Router();
stripe_test.use(function(a,b,c){b.setHeader("Access-Control-Allow-Origin","*");b.setHeader("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept");b.setHeader("Access-Control-Allow-Methods","GET, PUT, POST, DELETE");app.locals.settings.StripeMode?(keyPublishable=app.locals.settings.StripekeyPublishable,keySecret=app.locals.settings.StripekeySecret):(keyPublishable=app.locals.settings.StripekeyPublishableTest,keySecret=app.locals.settings.StripekeySecretTest);stripe=require("stripe")(keySecret);
c()});stripe_test.get("/",function(a,b,c){b.render("stripe_test",{title:"Stripe",keyPublishable:keyPublishable,js:[],css:[]}).end()}).get("/charge",function(a,b){}).post("/charge",function(a,b){stripe.charges.create({amount:999,currency:"usd",description:"Example charge",source:a.body.stripeToken},function(c,a){c&&console.log("ERROR ----- ",c);a&&console.log("ERROR ----- ",a);b.send({charge:a}).end()})});module.exports=stripe_test;
