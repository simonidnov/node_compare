var express=require("express"),comments=express.Router(),Comment_controller=require("../controllers/comments_controller"),Auth_helper=require("../helpers/auth_helper"),language_helper=require("../helpers/languages_helper"),uri_helper=require("../helpers/uri_helper"),lang=require("../public/languages/auth_lang");comments.use(function(e,t,s){t.setHeader("Access-Control-Allow-Origin","*"),t.setHeader("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),t.setHeader("Access-Control-Allow-Methods","GET, PUT, POST, DELETE"),Auth_helper.validate_admin(e,function(t){200===t.status?(e.body.isAdmin=!0,e.query.isAdmin=!0):(e.body.isAdmin=!1,e.query.isAdmin=!1)});var n=e.query;"PUT"===e.method||"POST"===e.method||"DELETE"===e.method?(console.log("req.body ::::::::: ",e.body),n=e.body,Auth_helper.validate_user(n,e.get("host"),function(e){200===e.status?s():t.status(e.status).send(e.datas)})):s()}),comments.get("/",function(e,t,s){Comment_controller.get(e,t,function(e){t.status(e.status).send(e.datas)})}).get("/stats",function(e,t,s){Comment_controller.getStats(e,t,function(e){t.status(e.status).send(e.datas)})}).post("/",function(e,t,s){Comment_controller.create(e,t,function(e){t.status(e.status).send(e.datas)})}).put("/",function(e,t,s){Comment_controller.update(e,t,function(e){t.status(e.status).send(e.datas)})}).delete("/",function(e,t,s){Comment_controller.delete(e,t,function(e){t.status(e.status).send(e.datas)})}),module.exports=comments;