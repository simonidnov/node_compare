var $jscomp={scope:{},findInternal:function(b,e,a){b instanceof String&&(b=String(b));for(var d=b.length,c=0;c<d;c++){var f=b[c];if(e.call(a,f,c,b))return{i:c,v:f}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,e,a){if(a.get||a.set)throw new TypeError("ES3 does not support getters and setters.");b!=Array.prototype&&b!=Object.prototype&&(b[e]=a.value)};
$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(b,e,a,d){if(e){a=$jscomp.global;b=b.split(".");for(d=0;d<b.length-1;d++){var c=b[d];c in a||(a[c]={});a=a[c]}b=b[b.length-1];d=a[b];e=e(d);e!=d&&null!=e&&$jscomp.defineProperty(a,b,{configurable:!0,writable:!0,value:e})}};
$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,a){return $jscomp.findInternal(this,b,a).v}},"es6-impl","es3");
function formular(b,e){this.target=b;this.callback=e;this.email_tester=/^[-!#$%&'*+\/0-9=?A-Z^_a-z{|}~](\.?[-!#$%&'*+\/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-?\.?[a-zA-Z0-9])*\.[a-zA-Z](-?[a-zA-Z0-9])+$/;this.init=function(){this.callback({status:"inited"});this.setListeners()};this.setListeners=function(){var a=this;$(b).find(".delete_input_array_button").off("click").on("click",function(){$(this).parent().remove()});$(b).find(".add_input_array_button").off("click").on("click",function(){var a=$(this).parent().parent().attr("data-name")+
""+$(this).parent().parent().find("input").length;$(this).parent().parent().find(".array_list_inputs").append('<li class="form-group material_input"><input minlength="5" type="text" name="'+a+'" value=""/><label>Entrez une valeur</label><div class="delete_input_array_button">Supprimer</div></li>');$(b).find(".delete_input_array_button").off("click").on("click",function(){$(this).parent().remove()})});$(b).find("select").off("change").on("change",function(b){a.inputCheck($(this),!0)});$(b).find("[data-file]").off("change").on("change",
function(a){var c=$(this).attr("id");a=new FormData;a.append("avatar",$(this)[0].files[0]);$.ajax({url:"/media",type:"POST",method:"POST",data:a,contentType:!1,processData:!1,success:function(a){$(b).find('[for="'+c+'"] img').attr("src","/"+a.path);$(b).find("#"+c.replace("_file","")).val("/"+a.path)}})});$(b).find(".image_cropper").change(function(){var a=document.getElementById($(this).attr("id")+"_preview"),c=new FileReader,f=$(this);c.readAsDataURL(this.files[0]);c.onload=function(c){a.src=this.result;
f.parent().append('<div class="btn btn-success valid_crop">Valider</div>');var d=new Cropper(a,{aspectRatio:f.attr("data-width")/f.attr("data-height"),crop:function(a){}});f.parent().find(".valid_crop").off("click").on("click",function(){f.parent().find(".valid_crop").remove();a.src=d.getCroppedCanvas().toDataURL();d.destroy();$("#image-id").attr("src");var c=a.src.replace(/^data:image\/(png|jpg);base64,/,""),c=base64ToBlob(c,"image/png"),g=new FormData;g.append("base64",c);$.ajax({url:"/media/base64",
type:"POST",method:"POST",data:g,contentType:!1,processData:!1,success:function(a){$(b).find("#"+f.attr("data-target")).val(a.path)}})})}});$(b).find("[data-action], [data-formaction]").off("click").on("click",function(d){d.preventDefault();d=$(this).attr("data-action");switch(d){case "switch_tab":a.callback({status:"hitted",action:d});break;case "submit":"undefined"!==typeof $(b).find("form").attr("action")&&"undefined"!==typeof $(b).find("form").attr("method")?(e({status:"hitted",action:"submit_form",
form:$(b).find("form")}),e({status:"hitted",action:"submit",form:$(b).find("form")})):e({status:"hitted",action:"submit"});break;default:a.callback({status:"hitted",action:d})}return!1});$(b).find("[data-formaction]").off("click").on("click",function(b){b.preventDefault();b=$(this).attr("data-formaction");switch(b){case "switch_tab":a.callback({status:"hitted",action:b});break;case "submit":e({status:"hitted",action:"submit_form",form:$("#"+$(this).attr("data-formid"))});break;default:a.callback({status:"hitted",
action:b})}return!1});$(b).find(".material_input input").off("focus").on("focus",function(){$(this).parent().addClass("focused");a.callback({status:"focus",value:$(this)});if("date"===$(this).attr("type")){var b=navigator.userAgent||navigator.vendor||window.opera;if(/windows phone/i.test(b)||/android/i.test(b)||/iPad|iPhone|iPod/.test(b)&&!window.MSStream)return!1;new datepicker($(this),function(a){})}});a.check_min_max();$(b).find(".material_input input, .material_input textarea").off("keypress").on("keypress",
function(){a.check_min_max()});$(b).find(".material_input input, .material_input textarea").off("blur").on("blur",function(){a.check_min_max();a.inputCheck($(this),!0);$(this).parent().removeClass("focused");a.callback({status:"blur",value:$(this)})});$(b).find(".material_input input, .material_input textarea").off("input").on("input",function(){a.inputCheck($(this),!1)});$(b).find('input[type="checkbox"], input[type="radio"]').off("change").on("change",function(){console.log("INPUT CHECK CHANGE ");
a.inputCheck($(this),!0);a.callback({status:"checkbox",name:$(this).attr("name"),value:$(this).is(":checked")})});a.checkInputs(!1);$(b).find("[data-tab]").off("click").on("click",function(){var b=$(this).attr("data-tab");$.each($(this).parent().find("[data-tab]"),function(a,d){$(this).attr("data-tab")===b?($("#"+$(this).attr("data-tab")).css("display","block"),$('[data-tab="'+$(this).attr("data-tab")+'"]').addClass("selected")):($("#"+$(this).attr("data-tab")).css("display","none"),$('[data-tab="'+
$(this).attr("data-tab")+'"]').removeClass("selected"))});a.callback({status:"tab_change",value:$(this).attr("data-tab")})})};this.check_min_max=function(){$.each($(b).find(".minlength"),function(a,b){var c;if(0<$(this).find("input").length)b=$(this).find("input"),c=b.val();else if(0<$(this).find("textarea").length)b=$(this).find("textarea"),c=b.val();else return!1;0===$(this).find(".number").length&&$(this).append('<span class="number"></span>');c.length+1>=parseInt(b.attr("minlength"))?$(this).find(".number").html('<span class="icon idkids-icon icon-check"></span>'):
$(this).find(".number").html(c.length+"/"+b.attr("minlength"))})};this.checkInputs=function(a){var d=this;$.each($(b).find(".material_input input, .material_input select, .material_input textarea"),function(b,f){d.inputCheck($(this),a)})};this.check_error=function(a,b){if(!b)return!1;if(""===a.val())return a.parent().addClass("empty").removeClass("notempty").removeClass("valid").removeClass("invalid"),a.parent().find(".input_error").remove(),!1;a.parent().removeClass("empty").addClass("notempty");
"undefined"!==a.attr("data-errormessage")&&0===a.parent().find(".input_error").length&&a.parent().append('<div class="input_error">'+a.attr("data-errormessage")+"</div>")};this.inputCheck=function(a,b){if("checkbox"===a.attr("type")){this.validform();if(a.is(":checked"))return a.parent().removeClass("error_check"),a.parent().find(".input_error").remove(),$('[data-checkboxrelative="'+a.attr("id")+'"]').css("display","block"),!0;console.log("NOT CHECKED");a.is(":required")&&(a.parent().addClass("error_check"),
console.log("NOT CHECKED AND REQUIRED"),this.check_error(a,!0));$('[data-checkboxrelative="'+a.attr("id")+'"]').css("display","none");return!1}if("SELECT"===a.prop("tagName"))return null===a.val()&&a.is(":required")?b&&a.is(":required")?(a.parent().addClass("invalid"),a.parent().removeClass("valid"),this.check_error(a,b)):(a.parent().removeClass("invalid"),a.parent().removeClass("valid"),a.parent().removeClass("notempty"),a.parent().find(".input_error").remove()):(a.parent().removeClass("invalid"),
a.parent().addClass("valid"),a.parent().addClass("notempty"),a.parent().find(".input_error").remove()),!1;if(""===a.val())a.parent().removeClass("notempty").addClass("empty"),b&&a.is(":required")?"undefined"!==typeof a.attr("data-errormessage")&&0==a.parent().find(".input_error").length&&b&&(a.parent().addClass("invalid"),a.parent().removeClass("valid"),this.check_error(a,b)):(a.parent().removeClass("invalid"),a.parent().removeClass("valid"),a.parent().find(".input_error").remove());else{a.parent().addClass("notempty").removeClass("empty");
switch(a.attr("type")){case "email":this.validateEmail(a.val())?(a.parent().addClass("valid"),a.parent().removeClass("invalid"),a.parent().find(".input_error").remove()):(a.parent().addClass("invalid"),a.parent().removeClass("valid"),this.check_error(a,b));this.validform();return;case "text":a.parent().addClass("valid");a.parent().removeClass("invalid");a.parent().find(".input_error").remove();break;case "date":a.parent().addClass("valid");this.validform();return;case "radio":console.log("RADIO");
this.validform();break;case "checkbox":this.validform()}if("undefined"!==typeof a.attr("data-regex")){if("same"===a.attr("data-regex"))return a.val()===$("#"+a.attr("data-target")).val()?(a.parent().addClass("valid"),a.parent().removeClass("invalid"),a.parent().find(".input_error").remove()):(a.parent().addClass("invalid"),a.parent().removeClass("valid"),this.check_error(a,b)),!1;(new RegExp(a.attr("data-regex").toString())).test(a.val())?(a.parent().removeClass("invalid"),a.parent().addClass("valid"),
0<a.parent().find(".input_error").length&&a.parent().find(".input_error").remove(),0<$('[data-checkinput="'+a.attr("id")+'"]').length&&$('[data-checkinput="'+a.attr("id")+'"] .check').addClass("checked")):(this.check_error(a,b),a.parent().addClass("invalid"),a.parent().removeClass("valid"));0<$('[data-checkinput="'+a.attr("id")+'"]').length&&($('[data-checkinput="'+a.attr("id")+'"] .check').removeClass("checked"),0<$('[data-checkinput="'+a.attr("id")+'"] .check_hash').length&&-1!==a.val().indexOf("#")?
$('[data-checkinput="'+a.attr("id")+'"] .check_hash').addClass("checked"):$('[data-checkinput="'+a.attr("id")+'"] .check_hash').removeClass("checked"),0<$('[data-checkinput="'+a.attr("id")+'"] .check_arobase').length&&-1!==a.val().indexOf("@")?$('[data-checkinput="'+a.attr("id")+'"] .check_arobase').addClass("checked"):$('[data-checkinput="'+a.attr("id")+'"] .check_arobase').removeClass("checked"),0<$('[data-checkinput="'+a.attr("id")+'"] .check_dot').length&&-1!==a.val().indexOf(".")?$('[data-checkinput="'+
a.attr("id")+'"] .check_dot').addClass("checked"):$('[data-checkinput="'+a.attr("id")+'"] .check_dot').removeClass("checked"),0<$('[data-checkinput="'+a.attr("id")+'"] .check_length').length&&a.val().length>=a.attr("minlength")?$('[data-checkinput="'+a.attr("id")+'"] .check_length').addClass("checked"):$('[data-checkinput="'+a.attr("id")+'"] .check_length').removeClass("checked"),0<$('[data-checkinput="'+a.attr("id")+'"] .check_capital').length&&(RegExp("[A-Z]+","g").test(a.val())?$('[data-checkinput="'+
a.attr("id")+'"] .check_capital').addClass("checked"):$('[data-checkinput="'+a.attr("id")+'"] .check_capital').removeClass("checked")),0<$('[data-checkinput="'+a.attr("id")+'"] .check_number').length&&(RegExp("[0-9]+","g").test(a.val())?$('[data-checkinput="'+a.attr("id")+'"] .check_number').addClass("checked"):$('[data-checkinput="'+a.attr("id")+'"] .check_number').removeClass("checked")))}if("undefined"!==typeof a.attr("minlength")){var c=a.attr("minlength");a.val().length<c&&a.is(":required")?
(a.parent().addClass("invalid"),a.parent().removeClass("valid"),this.check_error(a,b)):(a.parent().addClass("valid"),a.parent().removeClass("invalid"),a.parent().find(".input_error").remove())}else a.parent().addClass("valid"),a.parent().removeClass("invalid");this.validform()}};this.validform=function(a){$.each($(this.target).find("form"),function(a,b){var c=!0,g=$(this);$.each(g.find("input, textarea, select"),function(a,b){$(this).attr("required")&&("checkbox"===$(this).attr("type")?$(this).is(":checked")?
$('[data-checkboxrelative="'+$(this).attr("id")+'"]').css("display","block"):($('[data-checkboxrelative="'+$(this).attr("id")+'"]').css("display","none"),c=!1):"radio"!==$(this).attr("type")&&!$(this).parent().hasClass("valid")&&$(this).attr("required")&&(c=!1),null===$(this).val()&&(c=!1),""===$(this).val()&&(c=!1))});c?(g.find('button[type="submit"], [data-action="submit"]').removeClass("btn-disabled"),e({form:g.attr("id"),status:"validated"})):(g.find('button[type="submit"], [data-action="submit"]').addClass("btn-disabled"),
e({form:g.attr("id"),status:"invalid"}))})};this.validateEmail=function(a){return this.email_tester.test(a)?!0:!1};this.get_datas=function(){var a={};$.each($(b).find("form").serializeArray(),function(b,c){a[c.name]=c.value});$(b).find("input:checkbox, input:radio").map(function(){a[$(this).attr("name")]=$(this).is(":checked")});$.each($(b).find(".array_list_inputs"),function(b,c){c={};$.each($(this).find("input"),function(a,b){var g=$(this).attr("name"),d=$(this).val();if("checkbox"===$(this).attr("type")||
"radio"===$(this).attr("type"))d=$(this).is(":checked");c[g]=d});a[$(this).attr("data-name")]=c});return a}}
function datepicker(b,e){this.years=[];this.month="Janvier F\u00e9vrier Mars Avril Mai Juin Juillet Ao\u00fbt Septembre Octobre Novembre D\u00e9cembre".split(" ");this.days=[31,29,31,30,31,30,31,31,30,31,30,31];b.append();$("#idkids_calendar").remove();$("body").append('<div id="idkids_calendar" class="calendar"><div class="content"><div class="top_header">'+$('label[for="'+b.attr("id")+'"]').html()+'</div><div class="choices"><div class="selector"></div><div class="wrapper days"><ul class=""></ul></div><div class="wrapper months"><ul class=""></ul></div><div class="wrapper years"><ul class=""></ul></div></div><div class="bottom_footer"><div class="btn btn-lg btn-success" id="validate_and_close_calendar">Valider</div></div></div></div>');
$(".calendar .content").css({left:b.offset().left,top:b.offset().top-$("html, body").scrollTop()+40,width:b.width()});parseInt($(".calendar .content").css("top").replace("px",""))+$(".calendar .content").outerHeight()>window.innerHeight&&$(".calendar .content").css("top",window.innerHeight-$(".calendar .content").outerHeight());$("body").css("overflow","hidden");var a=0,d=this,c=2018,f=1890;b.attr("min")&&(f=(new Date(b.attr("min"))).getFullYear());for(b.attr("max")&&(c=(new Date(b.attr("max"))).getFullYear());c>
f;c--)$(".calendar .years ul").append('<li data-index="'+a+'" data-value="'+c+'" class="'+(0==a?"selected":"")+'">'+c+"</li>"),a++;for(c=0;c<this.month.length;c++)$(".calendar .months ul").append('<li data-index="'+c+'" data-value="'+(10>c+1?"0"+(c+1):c+1)+'" class="'+(0==c?"selected":"")+'">'+this.month[c]+"</li>");for(c=1;32>c;c++)$(".calendar .days ul").append('<li data-index="'+(c-1)+'" data-value="'+(10>c?"0"+c:c)+'" class="'+(1==c?"selected":"")+'">'+(10>c?"0"+c:c)+"</li>");""!==b.val()&&(c=
new Date(b.val()),f=c.getFullYear(),a=c.getMonth(),c=c.getDate(),f=$('.calendar .wrapper.years [data-value="'+f+'"]').attr("data-index"),$(".calendar .wrapper.days").scrollTop(40*(c-1)),$(".calendar .wrapper.months").scrollTop(40*a),$(".calendar .wrapper.years").scrollTop(40*f));$.fn.scrollEnd=function(a,b){$(this).scroll(function(){var c=$(this);c.data("scrollTimeout")&&clearTimeout(c.data("scrollTimeout"));c.data("scrollTimeout",setTimeout(a,b))})};$(".calendar .wrapper.days").scrollEnd(function(a){a=
$(".calendar .wrapper.days");var b=Math.round(a.scrollTop()/40),c=40*b;a.find("li").removeClass("selected");a.find("li").eq(b).addClass("selected");a.animate({scrollTop:c},200);d.setDate()},500);$(".calendar .wrapper.months").scrollEnd(function(a){a=$(".calendar .wrapper.months");var b=Math.round(a.scrollTop()/40),c=40*b;a.find("li").removeClass("selected");a.find("li").eq(b).addClass("selected");a.animate({scrollTop:c},200);d.setDate()},500);$(".calendar .wrapper.years").scrollEnd(function(a){a=
$(".calendar .wrapper.years");var b=Math.round(a.scrollTop()/40),c=40*b;a.find("li").removeClass("selected");a.find("li").eq(b).addClass("selected");a.animate({scrollTop:c},200);d.setDate()},500);$(".calendar .wrapper li").off("click").on("click",function(){$(this).parent().parent().animate({scrollTop:40*$(this).attr("data-index")},200)});$("#validate_and_close_calendar").off("click").on("click",function(){d.setDate();$("#idkids_calendar").remove();$("body").css("overflow","scroll")});this.setDate=
function(){var a=$(".calendar .wrapper.days .selected").attr("data-value"),c=$(".calendar .wrapper.months .selected").attr("data-value"),e=$(".calendar .wrapper.years .selected").attr("data-value");30===d.days[parseInt(c)-1]?($(".calendar .wrapper.days li").eq(30).addClass("disabled"),$(".calendar .wrapper.days li").eq(29).removeClass("disabled")):29===d.days[parseInt(c)-1]?($(".calendar .wrapper.days li").eq(29).addClass("disabled"),$(".calendar .wrapper.days li").eq(30).addClass("disabled")):$(".calendar .wrapper.days li").removeClass("disabled");
b.val(e+"-"+c+"-"+a);b.blur()}}function base64ToBlob(b,e){e=e||"";for(var a=window.atob(b),d=[],c=0,f=a.length;c<f;c+=1024){for(var g=a.slice(c,c+1024),k=Array(g.length),h=0;h<g.length;h++)k[h]=g.charCodeAt(h);g=new Uint8Array(k);d.push(g)}return new Blob(d,{type:e})};
