var express=require("express"),me=express.Router(),Auth_controller=require("../controllers/auth_controller"),language_helper=require("../helpers/languages_helper"),uri_helper=require("../helpers/uri_helper"),auth_helper=require("../helpers/auth_helper"),lang=require("../public/languages/auth_lang"),machineId=require("node-machine-id"),device_uid=machineId.machineIdSync({original:!0});me.use(function(e,t,a){t.setHeader("Access-Control-Allow-Origin","*"),t.setHeader("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),t.setHeader("Content-Type","application/json"),auth_helper.validate_from(e.query,e.get("host"))||t.status(401).send({message:"your server was not authorised",request:e.query,host:e.get("host"),is_ok:e.query.options.from_origin.indexOf(e.get("host"))}),console.log("-----------------------"),console.log("req.query :: ",e),console.log("req.query URL :: ",e.url),console.log("req.query pathname :: ",e.pathname),console.log("req.query :: ",e.get("Url")),console.log("-----------------------"),-1===e.url.indexOf("/from")&&(auth_helper.validate_user(e.query,e.get("host"))||t.status(401).send({message:"the user token was not up to date",request:e.query,host:e.get("host")})),a()}),me.get("/",function(e,t,a){t.send({message:"me get",request:e.query,host:e.get("host")})}).post("/",function(e,t,a){t.send({message:"me post",request:e.query})}).put("/",function(e,t,a){t.send({message:"me put",request:e.query})})["delete"]("/",function(e,t,a){t.send({message:"me delete",request:e.query})}).get("/members",function(e,t,a){t.send({message:"members get",request:e.query})}).post("/members",function(e,t,a){t.send({message:"members post",request:e.query})}).put("/members",function(e,t,a){t.send({message:"members put",request:e.query})})["delete"]("/members",function(e,t,a){t.send({message:"members delete",request:e.query})}).get("/address",function(e,t,a){t.send({message:"address get",request:e.query})}).post("/address",function(e,t,a){t.send({message:"address post",request:e.query})}).put("/address",function(e,t,a){t.send({message:"address put",request:e.query})})["delete"]("/address",function(e,t,a){t.send({message:"address delete",request:e.query})}).get("/services",function(e,t,a){t.send({message:"services get",request:e.query})}).post("/services",function(e,t,a){t.send({message:"services post",request:e.query})}).put("/services",function(e,t,a){t.send({message:"services put",request:e.query})})["delete"]("/services",function(e,t,a){t.send({message:"services delete",request:e.query})}).get("/basket",function(e,t,a){t.send({message:"basket get",request:e.query})}).post("/basket",function(e,t,a){t.send({message:"basket post",request:e.query})}).put("/basket",function(e,t,a){t.send({message:"basket put",request:e.query})})["delete"]("/basket",function(e,t,a){t.send({message:"basket delete",request:e.query})}).get("/from",function(e,t,a){t.send({message:"website authorised",request:e.query})}),module.exports=me;