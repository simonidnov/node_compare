const db=require("mongoose"),config=require("../config/config"),pages_datas={label:{type:"string",unique:!0},description:{type:"string"},keywords:{type:"string"},url:{type:"string"},thumb:{type:"string"},details:{type:"string"},html:{type:"string"},structure:{type:"Object"},stylsheet:{type:"string"},javascript:{type:"string"},user:{type:"string"},created:{type:"Date",default:Date.now},updated:{type:"Date",default:Date.now}};0===db.connection.readyState&&db.connect(config.database.users,{useMongoClient:!0});const pagesSchemas=new db.Schema(pages_datas),Pages=db.model("Pages",pagesSchemas);module.exports={attributes:pages_datas},module.exports.get=function(e,t,s){var a={};void 0!==e.page_url&&(a.url=e.page_url),void 0!==e.page_id&&(a._id=e.page_id),Pages.find(a,function(e,t){s(e?{status:405,datas:e}:{status:200,datas:t})})},module.exports.create=function(e,t,s){console.log(t),new_page=new Pages(t),new_page.save(function(e,t){s(e?{status:405,message:e}:{status:200,datas:t})})},module.exports.update=function(e,t,s,a){delete s.options,delete s._id,s.updated=Date.now(),Pages.updateOne({_id:t},{$set:s},function(e,t){a(e?{status:304,message:e}:{status:200,pages:t})})},module.exports.delete=function(e,t,s){Pages.deleteOne({_id:t},function(e,t){s(e?{status:405,message:e}:{status:200,pages:t})})};