var express=require("express"),api=express.Router(),Apps_controller=require("../controllers/apps_controller"),Pages_controller=require("../controllers/pages_controller"),Auth_controller=require("../controllers/auth_controller"),Email_controller=require("../controllers/email_controller"),Auth_helper=require("../helpers/auth_helper"),language_helper=require("../helpers/languages_helper"),uri_helper=require("../helpers/uri_helper"),lang=require("../public/languages/auth_lang");
api.use(function(a,b,c){b.setHeader("Access-Control-Allow-Origin","*");b.setHeader("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept");b.setHeader("Access-Control-Allow-Methods","GET, PUT, POST, DELETE");b.setHeader("Content-Type","application/json");var d=a.query;if("PUT"===a.method||"POST"===a.method||"DELETE"===a.method)d=a.body;Auth_helper.validate_user(d,a.get("host"),function(d){200===d.status?c():b.status(d.status).send(Auth_helper.addParams(d,a))})});
api.get("/",function(a,b,c){b.status(200).send(Auth_helper.addParams({title:"API RESPONSE RIGHT"},a))}).post("/",function(a,b,c){b.status(200).send(Auth_helper.addParams({title:"POST API NOT ALLOWED"},a))}).put("/",function(a,b,c){b.status(200).send(Auth_helper.addParams({title:"PUT API NOT ALLOWED"},a))})["delete"]("/",function(a,b,c){b.status(200).send(Auth_helper.addParams({title:"DELETE API NOT ALLOWED"},a))}).get("/apps",function(a,b,c){Apps_controller.get(a,{},function(d){b.status(d.status).send(Auth_helper.addParams(d,
a))})}).get("/apps/:action",function(a,b,c){switch(action){case "valid_sdk":Apps_controller.validate(a,b,function(d){b.status(d.status).send(Auth_helper.addParams(d,a))});break;default:b.status(200).send({status:"Hello",title:"action non d\u00e9finie",message:"votre requ\u00eate n'est pas reconnue par l'api"})}}).post("/apps",function(a,b,c){Auth_helper.validate_admin(a,function(a){200===a.status?c():b.status(200).send({title:"ACCESS_NOT_ALLOWED"})})},function(a,b,c){Apps_controller.create(a,b,function(d){b.status(d.status).send(Auth_helper.addParams(d,
a))})}).put("/apps",function(a,b,c){Auth_helper.validate_admin(a,function(a){200===a.status?c():b.status(200).send({title:"ACCESS_NOT_ALLOWED"})})},function(a,b,c){Apps_controller.update(a,b,function(d){b.status(d.status).send(Auth_helper.addParams(d,a))})})["delete"]("/apps",function(a,b,c){Auth_helper.validate_admin(a,function(a){200===a.status?c():b.status(200).send({title:"ACCESS_NOT_ALLOWED"})})},function(a,b,c){Apps_controller["delete"](a,b,function(d){b.status(d.status).send(Auth_helper.addParams(d,
a))})}).get("/pages",function(a,b,c){Pages_controller.get(a,b,function(d){b.status(d.status).send(Auth_helper.addParams(d,a))})}).post("/pages",function(a,b,c){Auth_helper.validate_admin(a,function(a){200===a.status?c():b.status(200).send({title:"ACCESS_NOT_ALLOWED"})})},function(a,b,c){Pages_controller.create(a,b,function(d){b.status(d.status).send(Auth_helper.addParams(d,a))})}).put("/pages",function(a,b,c){Auth_helper.validate_admin(a,function(a){200===a.status?c():b.status(200).send({title:"ACCESS_NOT_ALLOWED"})})},
function(a,b,c){Pages_controller.update(a,b,function(d){b.status(d.status).send(Auth_helper.addParams(d,a))})})["delete"]("/pages",function(a,b,c){Auth_helper.validate_admin(a,function(a){200===a.status?c():b.status(200).send({title:"ACCESS_NOT_ALLOWED"})})},function(a,b,c){Pages_controller["delete"](a,b,function(d){b.status(d.status).send(Auth_helper.addParams(d,a))})}).post("/request_validation_code",function(a,b,c){Auth_controller.request_validation_code(a,b,function(d){200===d.status?Email_controller.validate_account(a,
d,function(d){b.status(d.status).send(Auth_helper.addParams(d,a))}):b.status(d.status).send(Auth_helper.addParams(d,a))})}).put("/change_password",function(a,b,c){a.email=a.body.decoded.email;a.password=a.body.new_password;Auth_controller.update_password(a.body,b,function(d){b.status(200).send(Auth_helper.addParams(d,a))})}).post("/contact",function(a,b,c){require("../controllers/contact_controller").create(a,b,function(a){b.status(a.status).send(a)})}).get("/users/:any",function(a,b,c){b.status(200).send({title:"SERVICE CURRENTLY UNAIVALABLE"})}).post("/users/:any",
function(a,b,c){b.status(200).send({title:"SERVICE CURRENTLY UNAIVALABLE"})}).put("/users/:any",function(a,b,c){b.status(200).send({title:"SERVICE CURRENTLY UNAIVALABLE"})})["delete"]("/users/:any",function(a,b,c){Auth_helper.validate_admin(a,function(a){200===a.status?c():b.status(200).send({title:"ACCESS_NOT_ALLOWED"})})},function(a,b,c){Auth_controller.unregister(a,b,function(a){b.status(200).send({title:"USER DELETED",datas:a})})}).get("/oauth/:any",function(a,b,c){b.status(200).send({title:"SERVICE CURRENTLY UNAIVALABLE"})}).post("/oauth/:any",
function(a,b,c){b.status(200).send({title:"SERVICE CURRENTLY UNAIVALABLE"})}).put("/oauth/:any",function(a,b,c){b.status(200).send({title:"SERVICE CURRENTLY UNAIVALABLE"})})["delete"]("/oauth/:any",function(a,b,c){b.status(200).send({title:"SERVICE CURRENTLY UNAIVALABLE"})}).get("/userFilters",function(a,b,c){Auth_helper.validate_admin(a,function(a){200===a.status?c():b.status(200).send({title:"ACCESS_NOT_ALLOWED"})})},function(a,b,c){Auth_controller.getWithFilters(a,b,function(a){b.status(200).send(a)})}).get("/checkUserFilterTask",
function(a,b,c){Auth_helper.validate_admin(a,function(a){200===a.status?c():b.status(200).send({title:"ACCESS_NOT_ALLOWED"})})},function(a,b,c){Auth_controller.checkFilterDatas(a,b,function(a){b.status(200).send(a)})}).get("/send-sms",function(a,b,c){Auth_helper.validate_admin(a,function(a){200===a.status?c():b.status(200).send({title:"ACCESS_NOT_ALLOWED"})})},function(a,b,c){require("request").post("https://textbelt.com/text",{form:{phone:"+33768651457",message:"Hello world",key:"57652f35ce6bd73e072a37701775ee0e3dec4194VPqWleqqdvVMWkw0VLpUasUvu"}},
function(a,b,c){})});module.exports=api;
