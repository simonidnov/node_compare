const db=require("mongoose"),config=require("../config/config"),products_datas={label:{type:"string",unique:!0},description:{type:"string"},keywords:{type:"string"},thumb:{type:"string"},details:{type:"string"},medias:{type:"Array"},price:{type:"number"},devise:{type:"string",enum:["€","£","$"]},type:{type:"string",enum:["physical","demateralized"]},attributs:{type:"Object"},medias:{type:"Object"},created:{type:"Date",default:"Date.now"},updated:{type:"Date",default:"Date.now"}};0===db.connection.readyState&&db.connect(config.database.users,{useMongoClient:!0});const productsSchemas=new db.Schema(products_datas),Products=db.model("Products",productsSchemas);module.exports={attributes:products_datas},module.exports.get=function(t,e,s){var a={_id:e};Products.find(a,function(t,e){s(t?{status:405,datas:t}:{status:200,datas:e})})},module.exports.create=function(t,e,s){console.log(e),new_product=new Products(e),new_product.save(function(t,e){s(t?{status:405,message:t}:{status:200,datas:e})})},module.exports.update=function(t,e,s,a){delete s.options,delete s._id,s.updated=Date.now(),Products.updateOne({_id:e},{$set:s},function(t,e){a(t?{status:304,message:t}:{status:200,pages:e})})},module.exports.deleting=function(t,e,s){Products.deleteOne({_id:e},function(t,e){s(t?{status:405,message:t}:{status:200,pages:e})})};