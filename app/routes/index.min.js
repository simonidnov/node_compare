var express=require("express"),router=express.Router(),path=require("path"),language_helper=require("../helpers/languages_helper"),Page_controller=require("../controllers/pages_controller"),Apps_controller=require("../controllers/apps_controller"),uri_helper=require("../helpers/uri_helper"),lang=require("../public/languages/auth_lang"),apps=Apps_controller.getApps();
router.use(function(a,b,d){b.setHeader("Access-Control-Allow-Origin","*");b.setHeader("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept");b.setHeader("Access-Control-Allow-Methods","GET, PUT, POST, DELETE");d()});router.get("/google62e1de2dacd60926.html",function(a,b,d){console.log("/public/google_site_verification/google62e1de2dacd60926.html");b.sendFile(__dirname.replace("routes","")+"./public/google_site_verification/google62e1de2dacd60926.html")});
router.get(["/","/:page_url"],function(a,b,d){"undefined"===typeof a.params.page_url&&(a.params.page_url="apps");Page_controller.get(a.params,b,function(c){1===c.datas.length?b.render("page_templates/"+c.datas[0].template,{title:c.datas[0].label+" - "+app.locals.settings.label,user:a.session.Auth,locale:language_helper.getlocale(a),lang:lang,page:c.datas[0].url,page_datas:c.datas[0],js:["/public/javascripts/contact.min.js","/node_modules/swiper/dist/js/swiper.min.js","/public/javascripts/components/formular.min.js"],
css:["/node_modules/swiper/dist/css/swiper.min.css","/public/stylesheets/components/formular.min.css"]}):b.render("404",{title:"404",user:a.session.Auth,locale:language_helper.getlocale(a),lang:lang,page:a.params.page_name,page_datas:c.datas,js:["/public/javascripts/contact.min.js","/node_modules/swiper/dist/js/swiper.min.js","/public/javascripts/components/formular.min.js"],css:["/node_modules/swiper/dist/css/swiper.min.css","/public/stylesheets/components/formular.min.css"]});b.end()})});
module.exports=router;
