"use strict";$(function(){index.init()});var index={user:null,sdk:null,init:function(){this.set_hornav(),this.sdk=new idkids_jssdk({secret:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzZWNyZXQiOiI1YTMwZGViZmYzNjViMzBhZmQ3ODY4OWMiLCJpYXQiOjE1MTMxNTgxODV9.8e9JhLtcpzf8hO2CguRuUINBpLWOOClx_-3GfFoVqcM",callback_url:window.location.origin+"/redirect/",authorisation:{email:!0,mobile:!0,friends:!0,profile:!0,members:!0,address:!0,services:!0,wallet:!0,basket:!0,orders:!0,loyalty_card:!0}},function(t,a){});var t=this;console.log("init sdk"),this.sdk.init($.proxy(function(t){console.log("inited ",t),this.sdk.isLogged($.proxy(function(t){this.sdk.api.get("/me",{},function(t){$(".icon-account_1").replaceWith('<div class="avatar sm"><img src="'+t.datas.avatar+'" alt="avatar"/></div>'),$(".account_infos .avatar img").attr("src",t.datas.avatar),$(".account_infos .infos .label").html(t.datas.pseudo),$(".account_infos .infos .email").html(t.datas.email)})},this))},this)),$("[data-navigate]").off("click").on("click",function(a){a.preventDefault();var e=$(this).attr("data-navigate");switch(e){case"page_reload":window.history.pushState({pageTitle:$(this).attr("title")},"",t.add_params($(this).attr("href"))),t.navigate();break;default:console.log("default ",e)}}),"ontouchstart"in document.documentElement&&$("[data-navigate]").off("click, touchstart").on("click, touchstart",function(a){a.preventDefault();var e=$(this).attr("data-navigate");switch(e){case"page_reload":window.history.pushState({pageTitle:$(this).attr("title")},"",t.add_params($(this).attr("href"))),t.navigate();break;default:console.log("default ",e)}}),window.addEventListener("popstate",this.navigate),window.addEventListener("scroll",function(){index.replace_scroll()})},navigate:function(){var t=this.parse_url(window.location.pathname),a=Object.keys(t),e=a[1];void 0!==t[e]&&(e=t[e]),$("[data-for]").removeClass("selected"),$('[data-for="'+e+'"]').addClass("selected"),$.each($("[data-for]"),function(t,a){$("#"+$(this).attr("data-for")).css("display","none")}),$("#"+e).css("display","block"),$("html, body").animate({scrollTop:0},500,"swing",function(){}),this.set_hornav()},set_hornav:function(){$(".hor_nav li.selected").length>0&&$(".hor_nav").animate({scrollLeft:$(".hor_nav li.selected").position().left+$(".hor_nav").scrollLeft()-50},500)},parse_url:function(t){for(var a=[],e=t.split("/"),i=1;i<e.length;i+=2)a.push({}),a[e[i]]=e[i+1];return a},add_params:function(t){return t},replace_scroll:function(){$(document).scrollTop();$(document).scrollTop()>300?$(".header").addClass("sticky"):$(".header").removeClass("sticky"),$(".scroll_progress").css("width",100*$(window).scrollTop()/($("body").height()-$(window).height())+"%")}};