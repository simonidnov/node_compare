var express=require("express"),_=require("underscore"),admin=express.Router(),Auth_model=require("../models/auth_model"),Auth_helper=require("../helpers/auth_helper"),language_helper=require("../helpers/languages_helper"),uri_helper=require("../helpers/uri_helper"),lang=require("../public/languages/auth_lang");admin.use(function(e,s,o){s.setHeader("Access-Control-Allow-Origin","*"),s.setHeader("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),s.setHeader("Access-Control-Allow-Methods","GET, PUT, POST, DELETE"),Auth_helper.validate_session(e,function(e){200===e.status?o():s.redirect(301,"/auth")}),Auth_helper.validate_admin(e,function(e){200===e.status?o():s.redirect(301,'/auth?message="Vous n\'avez pas de droits administrateur sur la plateforme IDKIDS account"')})}),admin.get("/",function(e,s,o){s.render("admin/dashboard",{title:"Admin Dashboard",user:e.session.Auth,locale:language_helper.getlocale(),lang:lang,page:"dashboard",js:["/public/javascripts/admin/dashboard.js","/public/javascripts/components/formular.js","/node_modules/qrcode/build/qrcode.min.js"],css:["/public/stylesheets/admin/admin.css","/public/stylesheets/admin/dashboard.css","/public/stylesheets/components/formular.css"]})}).get("/dashboard",function(e,s,o){s.render("admin/dashboard",{title:"Admin Dashboard",user:e.session.Auth,locale:language_helper.getlocale(),lang:lang,page:"dashboard",js:["/public/javascripts/admin/dashboard.js","/public/javascripts/components/formular.js","/node_modules/qrcode/build/qrcode.min.js"],css:["/public/stylesheets/admin/admin.css","/public/stylesheets/admin/dashboard.css","/public/stylesheets/components/formular.css"]})}).get("/apps",function(e,s,o){s.render("admin/apps",{title:"Admin Dashboard",user:e.session.Auth,locale:language_helper.getlocale(),lang:lang,page:"apps",js:["/public/javascripts/admin/apps.js","/public/javascripts/components/formular.js","/node_modules/qrcode/build/qrcode.min.js"],css:["/public/stylesheets/admin/admin.css","/public/stylesheets/admin/apps.css","/public/stylesheets/components/formular.css"]})}).get("/users",function(e,s,o){s.render("admin/users",{title:"Admin Users",user:e.session.Auth,locale:language_helper.getlocale(),lang:lang,page:"users",js:["/public/javascripts/admin/users.js","/public/javascripts/components/formular.js","/node_modules/qrcode/build/qrcode.min.js"],css:["/public/stylesheets/admin/admin.css","/public/stylesheets/admin/users.css","/public/stylesheets/components/formular.css"]})}).get("/notifications",function(e,s,o){s.render("admin/notifications",{title:"Admin Notifications",user:e.session.Auth,locale:language_helper.getlocale(),lang:lang,page:"notifications",js:["/public/javascripts/admin/notifications.js","/public/javascripts/components/formular.js","/node_modules/qrcode/build/qrcode.min.js"],css:["/public/stylesheets/admin/admin.css","/public/stylesheets/admin/notifications.css","/public/stylesheets/components/formular.css"]})}).get("/pages",function(e,s,o){s.render("admin/pages",{title:"Admin Pages",user:e.session.Auth,locale:language_helper.getlocale(),lang:lang,page:"pages",js:["/public/javascripts/admin/pages.js","/public/javascripts/components/formular.js","/node_modules/qrcode/build/qrcode.min.js"],css:["/public/stylesheets/admin/admin.css","/public/stylesheets/admin/pages.css","/public/stylesheets/components/formular.css"]})}),module.exports=admin;