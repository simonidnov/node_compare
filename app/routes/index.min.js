var express=require("express"),router=express.Router(),language_helper=require("../helpers/languages_helper"),Page_controller=require("../controllers/pages_controller"),Apps_controller=require("../controllers/apps_controller"),uri_helper=require("../helpers/uri_helper"),lang=require("../public/languages/auth_lang"),apps=Apps_controller.getApps();
router.use(function(b,a,c){a.setHeader("Access-Control-Allow-Origin","*");a.setHeader("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept");a.setHeader("Access-Control-Allow-Methods","GET, PUT, POST, DELETE");c()});router.get("/",function(b,a,c){a.render("offline",{title:"IDKIDS.community WELCOME"});a.end()});
router.get("/:page_url",function(b,a,c){Page_controller.get(b.params,a,function(c){1===c.datas.length?a.render("index",{title:"Welcome",user:b.session.Auth,locale:language_helper.getlocale(b),lang:lang,page:b.params.page_name,page_datas:c.datas,js:[],css:[]}):a.render("404",{title:"404",user:b.session.Auth,locale:language_helper.getlocale(b),lang:lang,page:b.params.page_name,page_datas:c.datas,js:[],css:[]});a.end()})});module.exports=router;
