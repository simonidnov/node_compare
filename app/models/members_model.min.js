const db=require("mongoose"),config=require("../config/config"),member_datas={user_id:{type:"string"},first_name:{type:"string"},last_name:{type:"string"},pseudo:{type:"string"},avatar:{type:"string"},birth_date:{type:"string"},gender:{type:"string","enum":["undefined","male","female"],defaults:"undefined"},tags:{type:{type:"string","enum":["sport","Ã©ducation","culture","divertissements","autre"],defaults:"undefined"},label:{type:"string"}}};0===db.connection.readyState&&db.connect(config.database.users,{useMongoClient:!0});const memberSchemas=new db.Schema(member_datas),Member=db.model("Member",memberSchemas);module.exports={attributes:member_datas},module.exports.get=function(e,t,s){console.log("MEMBER GET ",e);var o={};null!==e&&(o.user_id=e),null!==t&&(o.member_id=t),console.log("MEMBER QUERY ",o),Member.find(o,function(e,t){console.log("FIND MEMBER ",e,t),s(e?{status:405,datas:e}:{status:200,datas:t})})},module.exports.create=function(e,t,s){t.user_id=e,new_member=new Member(t),new_member.save(function(e,t){s(e?{status:405,message:e}:{status:200,datas:t})})},module.exports.update=function(e,t,s,o){Member.updateOne({user_id:e,_id:t},{$set:s},function(e,t){o(e?{status:405,message:e}:{status:200,user:t})})},module.exports["delete"]=function(e,t,s){Member.deleteOne({user_id:e,_id:t},function(e,t){s(e?{status:405,message:e}:{status:200,user:t})})};