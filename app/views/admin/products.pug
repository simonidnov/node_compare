extends admin_header
block content
    div.admin
        div.shutter
            a.shutter_action(href="/admin/products/new_product" title="ajouter un produit")
                span.icon.icon-more.idkids-icons
                div.label Nouveau produit
            h3 Liste des produits
            ul.app_list
                each product in products
                    a(href="/admin/products/edit_product/"+product._id title="éditer le produit")
                        li
                            div.label= product.label
        div#produits.container(style= page === "products" ? "display:block" : "display:none")
            div.article
                div.col.col-md-6
                    h1 Créer des produits dématérialisés
                    p cette page est dédiée à la création de pages produits dématérialisés. Vous y trouverez des modules pour créer et manager vos produits et des formulaires pour y injecter vos sources.    
        div.container(style= page === "new_product" ? "display:block" : "display:none")
            div.col.col-md-6
              div.formular.fullscreen#create_product
                  h1 Créer un produit
                  br
                  form.form_content(method="POST" action='/products')
                    div.form-group.material_input.minlength
                        input#label(type="text" name="label" minlength="4" required)
                        label(for="label") Label * uniq
                    div.form-group.material_input.minlength
                        textarea#description(type="text" name="description" maxlength="255" minlength="75" required)
                        label(for="description") description (255 max char)
                    div.form-group.material_input
                        input#price(type="number" name="price" step="0.01" required)
                        label(for="price") price EUR
                    div.form-group.material_input.minlength
                        input#keywords(type="text" name="keywords" maxlength="75" minlength="25" required)
                        label(for="keywords") keywords (75 max char)
                    div.form-group
                        div.btn.btn-success.btn-lg(data-action="submit") Ajouter
        div.container(style= page === "edit_product" ? "display:block" : "display:none")
            div.col.col-md-6
              div.formular.fullscreen#edit_product
                h1 Éditer le produit
                br
                if(typeof edit_product !== "undefined")
                  form.form_content(method="PUT" action="/products" data-id=edit_product._id)
                    div
                        input#thumb_cropper.image_cropper.invisible(type="file" data-width="512" data-height="512" data-target="thumb" name="thumb_cropper")
                        label(for="thumb_cropper") Thumb 512*512px
                        br
                        img#thumb_cropper_preview.preview.cropper_preview(width="150" height="150" data-for="thumb" src=edit_product.thumb)
                        input#thumb.invisible(type="text" name="thumb" value=edit_product.thumb)
                    hr.separator
                    div
                        input#picture_cropper.image_cropper.invisible(type="file" data-width="1024" data-height="1024" data-target="picture" name="picture_cropper")
                        label(for="picture_cropper") Picture 1024*1024px
                        br
                        img#picture_cropper_preview.preview.cropper_preview(width="500" height="250" data-for="picture" src=edit_product.picture)
                        input#picture.invisible(type="text" name="picture" value=edit_product.picture)
                    hr.separator
                    input#_id.invisible(type="text" name="_id" value=edit_product._id)
                    div.form-group.material_input.minlength
                        input#label(type="text" name="label" minlength="4" value=edit_product.label required)
                        label(for="label") Label * uniq
                    div.form-group.material_input.minlength
                        textarea#description(type="text" name="description" maxlength="255" minlength="75" value=edit_product.description required)= edit_product.description
                        label(for="description") description (255 max char)
                    div.form-group.material_input
                        input#price(type="number" name="price" step="0.01" required value=edit_product.price)
                        label(for="price") price EUR
                    div.form-group.material_input.minlength
                        input#keywords(type="text" name="keywords" maxlength="75" minlength="25" value=edit_product.keywords required)
                        label(for="keywords") keywords (75 max char)
                    div.form-group.buttons.inline
                        div.btn.btn-success.btn-lg(data-action="submit") Enregistrer
                        div.btn.btn-danger.btn-lg(data-action="delete") Supprimer
