var express=require("express"),api=express.Router(),Apps_controller=require("../controllers/apps_controller"),Pages_controller=require("../controllers/pages_controller"),Auth_controller=require("../controllers/auth_controller"),Email_controller=require("../controllers/email_controller"),Auth_helper=require("../helpers/auth_helper"),language_helper=require("../helpers/languages_helper"),uri_helper=require("../helpers/uri_helper"),lang=require("../public/languages/auth_lang");
api.use(function(a,b,c){b.setHeader("Access-Control-Allow-Origin","*");b.setHeader("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept");b.setHeader("Access-Control-Allow-Methods","GET, PUT, POST, DELETE");b.setHeader("Content-Type","application/json");c()});
api.get("/",function(a,b,c){b.status(200).send({title:"API"})}).post("/",function(a,b,c){Auth_helper.validate_admin(a,function(a){200===a.status?b.status(200).send({title:"POST API"}):b.redirect(307,"/auth?message=NO_ACCESS_RIGHTS_API")})}).put("/",function(a,b,c){Auth_helper.validate_admin(a,function(a){200===a.status?b.status(200).send({title:"PUT API"}):b.redirect(307,"/auth?message=NO_ACCESS_RIGHTS_API")})})["delete"]("/",function(a,b,c){Auth_helper.validate_admin(a,function(a){200===a.status?
c():b.redirect(301,"/auth?message=NO_ACCESS_RIGHTS_API")});b.status(200).send({title:"DELETE API"})}).get("/apps",function(a,b,c){Apps_controller.get(a,{},function(a){b.status(a.status).send(a)})}).get("/apps/:action",function(a,b,c){switch(action){case "valid_sdk":Apps_controller.validate(a,b,function(a){b.status(a.status).send(a)});break;default:b.status(200).send({status:"Hello",title:"action non d\u00e9finie",message:"votre requ\u00eate n'est pas reconnue par l'api"})}}).post("/apps",function(a,
b,c){Apps_controller.create(a,b,function(a){b.status(a.status).send(a)})}).put("/apps",function(a,b,c){Apps_controller.update(a,b,function(a){b.status(a.status).send(a)})})["delete"]("/apps",function(a,b,c){Apps_controller["delete"](a,b,function(a){b.status(a.status).send(a)})}).get("/pages",function(a,b,c){Pages_controller.get(a,b,function(a){b.status(a.status).send(a)})}).post("/pages",function(a,b,c){Pages_controller.create(a,b,function(a){b.status(a.status).send(a)})}).put("/pages",function(a,
b,c){Pages_controller.update(a,b,function(a){b.status(a.status).send(a)})})["delete"]("/pages",function(a,b,c){Pages_controller["delete"](a,b,function(a){b.status(a.status).send(a)})}).post("/request_validation_code",function(a,b,c){Auth_controller.request_validation_code(a,b,function(c){200===c.status?Email_controller.validate_account(a,c,function(a){b.status(a.status).send(a)}):b.status(c.status).send(c)})}).put("/change_password",function(a,b,c){Auth_controller.update_password(a,b,function(a){b.status(a.status).send(a)})}).get("/users/:any",
function(a,b,c){b.status(200).send({title:"SERVICE CURRENTLY UNAIVALABLE"})}).post("/users/:any",function(a,b,c){b.status(200).send({title:"SERVICE CURRENTLY UNAIVALABLE"})}).put("/users/:any",function(a,b,c){b.status(200).send({title:"SERVICE CURRENTLY UNAIVALABLE"})})["delete"]("/users/:any",function(a,b,c){Auth_controller.unregister(a,b,function(a){b.status(200).send({title:"USER DELETED",datas:a})})}).get("/oauth/:any",function(a,b,c){b.status(200).send({title:"SERVICE CURRENTLY UNAIVALABLE"})}).post("/oauth/:any",
function(a,b,c){b.status(200).send({title:"SERVICE CURRENTLY UNAIVALABLE"})}).put("/oauth/:any",function(a,b,c){b.status(200).send({title:"SERVICE CURRENTLY UNAIVALABLE"})})["delete"]("/oauth/:any",function(a,b,c){b.status(200).send({title:"SERVICE CURRENTLY UNAIVALABLE"})}).get("/send-sms",function(a,b,c){require("request").post("https://textbelt.com/text",{form:{phone:"+33768651457",message:"Hello world",key:"57652f35ce6bd73e072a37701775ee0e3dec4194VPqWleqqdvVMWkw0VLpUasUvu"}},function(a,b,c){})}).post("/testdatas",
function(a,b,c){b.status(200).send({title:"testdatas POST",datas:a.body})}).put("/testdatas",function(a,b,c){b.status(200).send({title:"testdatas PUT",datas:a.body})});module.exports=api;
